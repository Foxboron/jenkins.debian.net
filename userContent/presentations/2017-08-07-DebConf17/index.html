<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>let's maintain jenkins.debian.org as a team</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/black.css" id="theme">

  <style type="text/css">
  li {
    margin-top: 28px !important;
  }
  ul ul li {
    margin-top: 16px !important;
  }
  * {
    text-transform: none !important;
  }
  a {
    color: inherit !important;
  }
  code {
    font-size: 90% !important;
  }
  table {
    width: 100%;
  }
  .reveal table td {
    border-bottom: none;
  }
  .reveal section img {
    border: none;
    box-shadow: none;
  }
  </style>

  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->

  <script>
  var link = document.createElement('link');
  link.rel = 'stylesheet';
  link.type = 'text/css';
  link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
  document.getElementsByTagName('head')[0].appendChild( link );
</script>
</head>

<!--

42min :)

who are you?
	who knows about Debian? ;-)
	who knows about jenkins.debian.net?

torbrowser-launcher


-->


<body>
  <div class="reveal">
    <div class="slides" style="text-align: left;">
      <section data-background="images/debian_logo.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	let's maintain jenkins.debian.org as a team
	</h2>
        <h4>
          <br>
          Holger Levsen &lt;holger@debian.org&gt;
        </h4>
	<p><small>DebConf17, 2017-08-07, Montreal, Canada</small></p>
      </section>

      <section data-background="images/h01ger.png" data-background-size="15%" data-background-color="black">
        <h2>about me</h2>
        <ul class="fragment">
          <li>Debian user since 1995, contributing since 2001</li>
          <li>Debian-Edu (Debian for Education), since 2003</li>
          <li>DebConf organizer, founded the DebConf video team in 2005</li>
          <li>Debian developer since 2007, <code>holger@debian.og</code></li>
          <li>Freelancer since 2004</li>
        </ul>
      </section>

      <section data-background="images/h01ger.png" data-background-size="15%" data-background-color="black">
        <h2>more about Debian QA and me</h2>
        <ul>
          <li class="fragment"><code>https://piuparts.debian.org</code> since 2009 - today (Nov 2016) juggling with 648988 logs from 53158 packages in 28 suites with Andreas Beckmann</li>
          <li class="fragment"><code>https://jenkins.debian.net</code> since 2012</li>
          <li class="fragment"><code>https://reproducible.debian.net</code> since 2014</li>
          <li class="fragment">since 2015 funded by the Linux Foundation for working on <code>https://reproducible-builds.org</code></li>
        </ul>
      </section>

      <section data-background="images/h01ger.png" data-background-size="15%" data-background-color="black">
        <h2>I'm busy.</h2>
        <ul>
          <li class="fragment">so I merge patches very easily, just looking whether it's safe to apply and at most only breaks your stuff.</li>
          <li class="fragment">1565 different jobs with contributions from 40 people, it's a mess. please send patches! either to cleaning up some parts or to add the next little island…</li>
	<li class="fragment">"I don't care."</li>
        </ul>
      </section>



      <section data-background="images/h01ger.png" data-background-size="15%" data-background-color="black">
        <h2>I do care.</h2>
        <ul>
          <li class="fragment">I really want to maintain this as a team and there is a team already. But it's still too much my setup…</li>
	  <li class="fragment">There is jenkins.debian.org.</li>
	  <li class="fragment">Let's go there. This is my outline, please hack it and send patches!</li>
  </ul>
      </section>

      <section data-background="images/mattia.png" data-background-size="15%" data-background-position="92% 15%">
        <h2>
 	jenkins.debian.net contributor #1
	</h2>
        <ul>
           <li>Mattia Rizzolo, the only other person having an overview about the whole thing. Has access to everything I have.</li>
        </ul>
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	jenkins.debian.net contributors
	</h2>
        <ul>
           <li>Valerie Young and others: reproducible Debian</li>
           <li>Helmut Grohne: rebootstrap</li>
           <li>Samuel Thibault: hurd + accessibility</li>
           <li>Steven Chamberlain: kfreebsd</li>
           <li>Phil Hands: lvc</li>
           <li>Tomasz Nitecki: jenkins java support</li>
	   <li class="fragment">36 contributors to <code>jenkins.debian.net.git</code> in total, also committers from Arch Linux, openSUSE, LEDE, coreboot, Guix, FreeBSD and NetBSD </li>
        </ul>
      </section>


      <section data-background="images/debian.jpg" data-background-color="black">
        <h2>Who are you?</h2>
        <ul>
          <li class="fragment">Who uses jenkins.d.n regularily?</li>
	  <li class="fragment">Who wants to contribute/control (more) jobs on jenkins.d.o?</li>
      	  <li class="fragment">Who thinks current jenkins is too noisy?</li>
  </ul>
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	What is jenkins?
	</h2>
        <ul>
           <li>to me: mostly a cron scheduler with a web UI and notifications.</li>
      	  <li class="fragment">(in)security is part of the design. I only trust jenkins for QA and presenting results, not for generating binaries…</li>
       </ul>
      </section>

      <section data-background="images/debian.jpg" data-background-color="black">
        <h2>other Debian QA efforts elsewhere</h2>
        <ul>
	<li><code>lintian.debian.org</code></li>
	<li><code>piuparts.debian.org</code></li>
	<li><code>ci.debian.net</code></li>
	<li>periodic full archive rebuilds (amd64 only)</li>
	<li>...</li>
        </ul>
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	about jenkins.debian.net
	</h2>
	<ul>
          <li>resources sponsored by Profitbricks since 2012</li>
	  <li>first request on August 2nd 2012: 2-4 cores, 2GB RAM, 1 TB storage</li>
        </ul>
      </section>

      <section data-background="images/jenkins_jobs-year.png" data-background-size="65%">
        &nbsp;
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	Profitbricks resources used by jenkins.debian.net
	</h2>
        <ul>
          <li>17 machines (16*Debian, 1*FreeBSD, 13*64bit, 4*32bit)<br />
          in 2 datacenters (FKB + FRA)</li>
          <li>168 cores (144 AMD, 24 Intel) with 498  GB RAM</li>
          <li>3 TB HDD and 2 TB SDD storage</li>
          <li>no static IP addresses, no idea about traffic (500gb/month?)</li>
          <li class="fragment">2 DCD users: Mattia Rizzolo and me</li>
        </ul>
      </section>

      <section data-background="images/rbo.png" data-background-size="25%" data-background-position="90% 10%">
        <h2>
 	 Resources used for reproducibility testing on jenkins.debian.net, by architecture &amp; sponsor
	</h2>
        <ul>
          <li>13 amd64 systems, sponsored by Profitbricks</li>
          <li>4 i386 systems, sponsored by Profitbricks</li>
          <li>26 armhf systems, sponsored by vagrant@d.o, Debian &amp; other donations</li>
          <li>8 arm64 systems, sponsored by codethink.co.uk</li>
        </ul>
      </section>


      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	about jenkins.debian.net continued…
	</h2>
	<ul>
          <li><a href="https://git.debian.org/git/qa/jenkins.debian.net.git"><code>git clone ssh://git.debian.org/git/qa/jenkins.debian.net.git</code></a></li>
	  <li>INSTALL, README, job-cfg/*, bin/*</li>
	  <li>code base grown in 5 years by 40 people…</li>
	  <li>ansible, builds with sbuild or jenkins-debian-glue, namespaces, you name it, please send patches</li>
	  <li>views so far were configured manually, but it's now possible with jenkins-job-builder too - please send patches!</li>
        </ul>
      </section>


      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
	 Benefits for debian
	</h2>
        <ul class="fragment">
	<li>
	 IRC / mail / web notifications, #debian-qa IRC channel and 11 other channels, more mailinglists
	</li>
	<li>
	 Early notifications of problems - though bugs still need to be filed manually
	</li>
	<li>
	 Countless bug reports,	ie 2670 done ftbfs via reproducible… 
	</li>
        </ul>
      </section>
 
     <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
	 Benefits for you?
	</h2>
        <ul class="fragment">
	<li>
	 The following is a quick summary of the &gt;1000 jobs jenkins is running. Nobody except Mattia and me are expected to remember them all…
	</li>
	<li>
	 Please yell if there is a job (notification) annoying you.
	</li>
        </ul>
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	misc debian-qa related jobs:
	</h2>
		  <li>orphaned packages without bug</li>
                  <li>dpkg trigger cycles</li> 
                  <li>debhelper, debsums, lintian and piuparts are build on git commits in jessie, stretch and unstable</li>
         	  <li>multiarch versionskew</li>
		  <li>pkg-haskell</li>
        </ul>
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	chroot-installation tests
	</h2>
        <ul>
          <li>453 jobs basically running <code>apt install $metapackages</code><br />
           (gnome, kde, cinnamon, lxde, xfce, qt4, qt5, haskell, developer, debconf-video, debian-edu, debian-parl, debian-design)</li>
          <li>new installations and upgrades tested in <br />
           jessie (85), stretch (226), buster (182), sid (184)</li>
          <li>jessie monthly, stretch weekly, buster every other day, sid daily</li>
        </ul>
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	g-i-installation tests
	</h2>
        <ul>
          <li>tests Debian Installer (d-i) in graphical mode ("g-i") and text mode</li>
          <li>creates videos and screenshots</li>
          <li>plain Debian (installations and rescue mode) and Debian Edu</li>
          <li>jessie, stretch and sid</li>
          <li>linux, kfreebsd and hurd</li>
          <li>finally almost deprecated today, will be replaced by lvc tests (libvirt-cucumber) maintained by Phil Hands</li>
        </ul>
      </section>

      <section data-background="images/g-i.png" data-background-size="100%">
        &nbsp;
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	lvc = libvirt cucumber
	</h2>
        <ul>
          <li>lvc tests are work in progress by Phil Hands</li>
	  <li>taken from Tails</li>
	  <li>now I've heard Tails wants to push us using those to improve the quality of Debian to improve the quality of Tails</li>
	  <li>not there yet, but they've started to get useful</li>
	  <li>should fully replace g-i-installation.sh at the end of the year?</li>
        </ul>
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	more debian-installer related jobs:
	</h2>
        <ul>
                  <li>97 packages (building udebs) triggered by commits to their git master branches</li>
                  <li>manual in 24 languages, also git triggered</li>
                  <li>lvc and d-i from proposed branches planned</li>
        </ul>
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	37 debian-edu jobs:
	</h2>
        <ul>
           <li>
            28 g-i tests for jessie and stretch
           </li>
           <li>
            8 debian-edu packages build triggerd by commits on their git master branches
           </li>
           <li>
            very useful for debian-edu-doc which is published for 7 languages in HTML, PDF &amp; EPUB format.
           </li>
        </ul>
      </section>


      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
	rebootstrap:
	</h2>
		<ul>
			<li>Cross bootstrap Debian from scratch… </li>
			<li> alpha arm64 arm64ilp32 armel armhf hppa hurd-amd64 hurd-i386 i386 kfreebsd-amd64 kfreebsd-armhf kfreebsd-i386 m68k mips mips64el mips64r6el mipsel mipsr6el musl-linux-arm64 musl-linux-armhf musl-linux-i386 musl-linux-mips musl-linux-mipsel nios2 powerpc powerpcel powerpcspe ppc64 ppc64el s390x sh4 sparc sparc64 tilegx x32</li>
			<li> Helmut Grohne files lots of cross-building and bootstrapping bugs.</li>
		</ul>
      </section>



      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	reproducible.debian.net / tests.reproducible-builds.org/debian/
	</h2>
        <ul>
          <li>created by 483 jobs on jenkins.debian.net</li>
          <li>we had 151 more jobs but those now run via a systemd service written in shell…/</li>
          <li class="fragment">it's not only about Debian anymore…</li>
          <li class="fragment">though let's rather talk about jenkins.debian.org now…</li>
        </ul>
      </section>
 
      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	So, about the to migration jenkins.debian.org
	</h2>
        <ul>
          <li class="fragment">jerea.debian.org is ready and jenkins.debian.org is a CNAME pointing to it - thanks to DSA!</li>
          <li class="fragment">next: create another small script, to deploy (and only deploy) job-cfg/self.yaml</li>
          <li class="fragment">then: move on to the next yaml file, eg. piuparts.yaml or whatever. Then: rinse, repeat, until all are moved</li>
	  <li class="fragment">jenkins.debian.net will become profitbricks-build0 and keep running the actual jobs (and the reproducible webpages) for now…</li>
        </ul>
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	Ways to contribute
	</h2>
        <ul>
	  <li>please file bugs about all the issues jenkins finds</li>
          <li>please file bugs about all the noise jenkins is doing</li>
	  <li class="fragment">please send patches</li>
          <li class="fragment"> we have ressources "for anything": write a useful test - and maintain it - and we will happily run it - and don't worry, noone has a test setup except Phil ;-)</li>
        </ul>
      </section>

      <section data-background="images/debian-jenkins.png" data-background-size="10%" data-background-position="90% 10%">
        <h2>
 	Contact us
	</h2>
        <ul>
	  <li>IRC: #debian-qa on irc.oftc.net</li>
          <li>Bugs: bugs.debian.org/jenkins.debian.org</li>
	  <li>Lists: jenkins-dev@lists.alioth.debian.org</li>
        </ul>
      </section>


      <section data-background-color="white" data-background="images/rbo.png" data-background-size="25%" data-background-position="90% 10%">
        <h2>Thanks:</h2>
        <p style="text-align: center;">
 	  <img src="images/lf.png">
	  &nbsp; &nbsp;
          <img src="images/cii.png">
          <br>
          <img src="images/profitbricks.jpg">
          <br>
          <img src="images/codethink.png">
          <br>
          <img src="images/debian_logo.png">
        </p>
      </section>

      <section data-background="images/debian.jpg" data-background-color="black">
        <h2 style="text-align: center;">Questions?</h2>

        <br />
        <br />

        <table>
        <tr>
          <td>
            <a href="mailto:holger@debian.org">holger@debian.org</a>
          </td>
          <td style="text-align: right;">
            <code>B8BF 5413 7B09 D35C F026<br />FE9D 091A B856 069A AA1C</code>
          </td>
        </tr>
        </table>

        <br>

        <p style="text-align: center;">
          <a href="https://jenkins.debian.net/"><code>https://jenkins.debian.net</code></a>
          <br>
          <a href="https://git.debian.org/git/qa/jenkins.debian.net.git"><code>git.debian.org/git/qa/jenkins.debian.net.git</code></a>
 	 <br />
	 <br />
	 <br />
 	 <br />
	 <br />
	 <br />
        </p>
        <p style="text-align: center;">
         <small> …and many thanks to Chris Lamb for the nice slide design!</small>
        </p>
      </section>
    </div>
  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.js"></script>
  <script>
    Reveal.initialize({
      controls: false,
      progress: false,
      history: true
    });
  </script>
</body>
</html>
